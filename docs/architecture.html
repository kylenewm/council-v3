<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Council v3 - Architecture Overview</title>
  <style>
    :root {
      --bg-dark: #0a0a0f;
      --bg-card: #12141a;
      --bg-inner: #1a1d24;
      --purple: #8b5cf6;
      --blue: #3b82f6;
      --green: #10b981;
      --amber: #f59e0b;
      --cyan: #06b6d4;
      --text: #e2e8f0;
      --text-muted: #64748b;
      --text-dim: #475569;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: var(--bg-dark);
      font-family: 'SF Mono', 'Fira Code', monospace;
      color: var(--text);
      padding: 30px;
      min-height: 100vh;
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
    }

    h1 {
      font-size: 32px;
      font-weight: 700;
      letter-spacing: 4px;
      text-transform: uppercase;
      background: linear-gradient(90deg, var(--purple), var(--blue));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .subtitle {
      color: var(--text-muted);
      font-size: 14px;
      margin-top: 10px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    /* Layer cards */
    .layer {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 20px;
      border: 1px solid #2a2d35;
      position: relative;
    }

    .layer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      border-radius: 16px 16px 0 0;
    }

    .layer.purple::before { background: var(--purple); }
    .layer.blue::before { background: var(--blue); }
    .layer.green::before { background: var(--green); }
    .layer.amber::before { background: var(--amber); }

    .layer-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }

    .layer-number {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      font-weight: 700;
    }

    .layer.purple .layer-number { background: rgba(139, 92, 246, 0.2); color: var(--purple); }
    .layer.blue .layer-number { background: rgba(59, 130, 246, 0.2); color: var(--blue); }
    .layer.green .layer-number { background: rgba(16, 185, 129, 0.2); color: var(--green); }
    .layer.amber .layer-number { background: rgba(245, 158, 11, 0.2); color: var(--amber); }

    .layer-title {
      font-size: 18px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    .layer.purple .layer-title { color: var(--purple); }
    .layer.blue .layer-title { color: var(--blue); }
    .layer.green .layer-title { color: var(--green); }
    .layer.amber .layer-title { color: var(--amber); }

    .layer-desc {
      font-size: 12px;
      color: var(--text-muted);
    }

    /* Component grid */
    .components {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
      margin-bottom: 16px;
    }

    .component {
      background: var(--bg-inner);
      border-radius: 10px;
      padding: 14px;
      border: 1px solid #2a2d35;
      transition: all 0.2s;
    }

    .component:hover {
      border-color: var(--blue);
      transform: translateY(-2px);
    }

    .component-icon {
      font-size: 20px;
      margin-bottom: 8px;
    }

    .component-name {
      font-size: 12px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 4px;
    }

    .component-desc {
      font-size: 10px;
      color: var(--text-dim);
      line-height: 1.4;
    }

    /* Flow indicator */
    .flow-arrow {
      display: flex;
      justify-content: center;
      padding: 12px 0;
      color: var(--text-dim);
      font-size: 20px;
    }

    /* Inline flow */
    .inline-flow {
      display: flex;
      align-items: center;
      gap: 8px;
      background: var(--bg-inner);
      border-radius: 8px;
      padding: 12px 16px;
      font-size: 12px;
      color: var(--text-muted);
      flex-wrap: wrap;
    }

    .inline-flow .step {
      color: var(--text);
      background: rgba(255,255,255,0.05);
      padding: 4px 10px;
      border-radius: 4px;
    }

    .inline-flow .arrow {
      color: var(--text-dim);
    }

    /* File output */
    .files {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .file {
      font-size: 11px;
      padding: 6px 12px;
      background: rgba(255,255,255,0.03);
      border: 1px solid #2a2d35;
      border-radius: 6px;
      color: var(--text-muted);
    }

    .file.highlight {
      border-color: var(--purple);
      color: var(--purple);
    }

    /* Section label */
    .section-label {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text-dim);
      margin-bottom: 10px;
    }

    /* Links to detail pages */
    .detail-link {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--cyan);
      text-decoration: none;
      padding: 6px 12px;
      background: rgba(6, 182, 212, 0.1);
      border-radius: 6px;
      margin-top: 12px;
      transition: all 0.2s;
    }

    .detail-link:hover {
      background: rgba(6, 182, 212, 0.2);
    }

    /* Footer */
    .footer {
      text-align: center;
      margin-top: 40px;
      padding-top: 30px;
      border-top: 1px solid #2a2d35;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .footer-link {
      font-size: 12px;
      color: var(--text-muted);
      text-decoration: none;
      padding: 8px 16px;
      background: var(--bg-card);
      border-radius: 8px;
      border: 1px solid #2a2d35;
      transition: all 0.2s;
    }

    .footer-link:hover {
      border-color: var(--blue);
      color: var(--text);
    }

    .footer-note {
      font-size: 10px;
      color: var(--text-dim);
      max-width: 500px;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Council v3</h1>
    <div class="subtitle">Multi-Model Planning + Voice-Controlled Agent Dispatcher</div>
  </div>

  <div class="container">

    <!-- LAYER 1: LLM Council -->
    <div class="layer purple">
      <div class="layer-header">
        <div class="layer-number">1</div>
        <div>
          <div class="layer-title">LLM Council</div>
          <div class="layer-desc">Multi-model planning via OpenRouter API</div>
        </div>
      </div>

      <div class="section-label">Modes</div>
      <div class="components">
        <div class="component">
          <div class="component-icon">üìã</div>
          <div class="component-name">Plan</div>
          <div class="component-desc">Generate project plans with tech stack & features</div>
        </div>
        <div class="component">
          <div class="component-icon">‚öñÔ∏è</div>
          <div class="component-name">Debate</div>
          <div class="component-desc">Technical debates with multiple perspectives</div>
        </div>
        <div class="component">
          <div class="component-icon">üîÑ</div>
          <div class="component-name">Refine</div>
          <div class="component-desc">Iterate on existing plans with feedback</div>
        </div>
      </div>

      <div class="section-label">Process</div>
      <div class="inline-flow">
        <span class="step">Claude Draft</span>
        <span class="arrow">+</span>
        <span class="step">GPT Draft</span>
        <span class="arrow">‚Üí</span>
        <span class="step">Critique</span>
        <span class="arrow">‚Üí</span>
        <span class="step">Chair Synthesize</span>
        <span class="arrow">‚Üí</span>
        <span class="step">PLAN.md</span>
      </div>

      <a href="planning.html" class="detail-link">‚Üí See detailed planning flow</a>
    </div>

    <div class="flow-arrow">‚Üì</div>

    <!-- Bootstrap -->
    <div class="layer purple" style="padding: 16px 24px;">
      <div style="display: flex; align-items: center; gap: 16px;">
        <div class="component-icon">üöÄ</div>
        <div>
          <div class="component-name" style="font-size: 14px;">Bootstrap</div>
          <div class="component-desc">Generate project files from plan</div>
        </div>
        <div class="files" style="margin-left: auto;">
          <span class="file highlight">CLAUDE.md</span>
          <span class="file">STATE.md</span>
          <span class="file">LOG.md</span>
        </div>
      </div>
    </div>

    <div class="flow-arrow">‚Üì</div>

    <!-- LAYER 2: Dispatcher -->
    <div class="layer blue">
      <div class="layer-header">
        <div class="layer-number">2</div>
        <div>
          <div class="layer-title">Dispatcher</div>
          <div class="layer-desc">Multi-source command routing + state management</div>
        </div>
      </div>

      <div class="section-label">Input Channels</div>
      <div class="components">
        <div class="component">
          <div class="component-icon">üé§</div>
          <div class="component-name">FIFO</div>
          <div class="component-desc">Voice via named pipe ~/.council/in.fifo</div>
        </div>
        <div class="component">
          <div class="component-icon">üì±</div>
          <div class="component-name">Pushover</div>
          <div class="component-desc">Phone notifications & replies</div>
        </div>
        <div class="component">
          <div class="component-icon">üí¨</div>
          <div class="component-name">Telegram</div>
          <div class="component-desc">Bot commands from allowed users</div>
        </div>
      </div>

      <div class="section-label">Core Functions</div>
      <div class="components">
        <div class="component">
          <div class="component-icon">üîÄ</div>
          <div class="component-name">Router</div>
          <div class="component-desc">Parse commands ‚Üí tmux send-keys</div>
        </div>
        <div class="component">
          <div class="component-icon">üìë</div>
          <div class="component-name">Task Queue</div>
          <div class="component-desc">Queue tasks: t1 | t2 | t3</div>
        </div>
        <div class="component">
          <div class="component-icon">‚ö°</div>
          <div class="component-name">Circuit Breaker</div>
          <div class="component-desc">Open after 3x no git progress</div>
        </div>
        <div class="component">
          <div class="component-icon">üîÑ</div>
          <div class="component-name">Ralph</div>
          <div class="component-desc">Auto-continue with original prompt</div>
        </div>
        <div class="component">
          <div class="component-icon">üíæ</div>
          <div class="component-name">state.json</div>
          <div class="component-desc">Persist state across restarts</div>
        </div>
      </div>

      <a href="inputs.html" class="detail-link">‚Üí See detailed input flow</a>
    </div>

    <div class="flow-arrow">‚Üì</div>

    <!-- LAYER 3: Agent Workflow -->
    <div class="layer green">
      <div class="layer-header">
        <div class="layer-number">3</div>
        <div>
          <div class="layer-title">Agent Workflow</div>
          <div class="layer-desc">Subagents + slash commands + hooks</div>
        </div>
      </div>

      <div class="section-label">Subagents</div>
      <div class="components">
        <div class="component">
          <div class="component-icon">üèóÔ∏è</div>
          <div class="component-name">code-architect</div>
          <div class="component-desc">Design before implementing</div>
        </div>
        <div class="component">
          <div class="component-icon">‚úÖ</div>
          <div class="component-name">verify-app</div>
          <div class="component-desc">Test + verify implementation</div>
        </div>
        <div class="component">
          <div class="component-icon">‚ú®</div>
          <div class="component-name">code-simplifier</div>
          <div class="component-desc">Reduce complexity</div>
        </div>
        <div class="component">
          <div class="component-icon">üì¶</div>
          <div class="component-name">build-validator</div>
          <div class="component-desc">Check deploy readiness</div>
        </div>
        <div class="component">
          <div class="component-icon">üîß</div>
          <div class="component-name">oncall-guide</div>
          <div class="component-desc">Debug production issues</div>
        </div>
      </div>

      <div class="section-label">Commands</div>
      <div class="inline-flow">
        <span class="step">/test</span>
        <span class="arrow">‚Üí</span>
        <span class="step">/done</span>
        <span class="arrow">‚Üí</span>
        <span class="step">/review</span>
        <span class="arrow">‚Üí</span>
        <span class="step">/ship</span>
      </div>

      <div class="section-label" style="margin-top: 16px;">Hooks</div>
      <div class="components" style="grid-template-columns: repeat(3, 1fr);">
        <div class="component">
          <div class="component-name">PostToolUse</div>
          <div class="component-desc">Auto-format with black</div>
        </div>
        <div class="component">
          <div class="component-name">Stop</div>
          <div class="component-desc">Rich notification on complete</div>
        </div>
        <div class="component">
          <div class="component-name">Notification</div>
          <div class="component-desc">Alert when needs attention</div>
        </div>
      </div>

      <div class="section-label" style="margin-top: 16px;">Workflow</div>
      <div class="inline-flow">
        <span class="step">Think</span>
        <span class="arrow">‚Üí</span>
        <span class="step">Implement</span>
        <span class="arrow">‚Üí</span>
        <span class="step">Verify</span>
        <span class="arrow">‚Üí</span>
        <span class="step">Simplify</span>
        <span class="arrow">‚Üí</span>
        <span class="step">Review</span>
        <span class="arrow">‚Üí</span>
        <span class="step">Ship</span>
      </div>
    </div>

    <div class="flow-arrow">‚Üì</div>

    <!-- LAYER 4: Output -->
    <div class="layer amber">
      <div class="layer-header">
        <div class="layer-number">4</div>
        <div>
          <div class="layer-title">Output</div>
          <div class="layer-desc">Multi-channel notifications + version control</div>
        </div>
      </div>

      <div class="components">
        <div class="component">
          <div class="component-icon">üñ•Ô∏è</div>
          <div class="component-name">Mac Notifier</div>
          <div class="component-desc">terminal-notifier alerts</div>
        </div>
        <div class="component">
          <div class="component-icon">üì±</div>
          <div class="component-name">Pushover</div>
          <div class="component-desc">Phone notifications</div>
        </div>
        <div class="component">
          <div class="component-icon">üìù</div>
          <div class="component-name">Git</div>
          <div class="component-desc">Commits + Pull Requests</div>
        </div>
        <div class="component">
          <div class="component-icon">üñºÔ∏è</div>
          <div class="component-name">tmux</div>
          <div class="component-desc">Real-time pane display</div>
        </div>
        <div class="component">
          <div class="component-icon">üìÑ</div>
          <div class="component-name">State Files</div>
          <div class="component-desc">STATE.md + LOG.md</div>
        </div>
      </div>
    </div>

  </div>

  <div class="footer">
    <div class="footer-links">
      <a href="planning.html" class="footer-link">üìã Planning Detail</a>
      <a href="inputs.html" class="footer-link">üé§ Input Channels</a>
      <a href="coordination.html" class="footer-link">üîÑ Workflow Examples</a>
    </div>
    <div class="footer-note">
      Council v3 combines multi-model planning with voice-controlled agent dispatch.
      Each layer can be explored in detail via the links above.
    </div>
  </div>
</body>
</html>
